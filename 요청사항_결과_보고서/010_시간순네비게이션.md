# [010] Phase 10 시간순 네비게이션

## 요청 정보

- **날짜:** 2026-01-29
- **요청 내용:** 개발 순서 Phase 10 (시간순 네비게이션) 진행
  - 세로 네비게이션 바
  - 드래그/스크롤 → 시간/구간 점프
  - 이벤트 마커

---

## 진행 내용

### 10.1 세로 네비게이션 바

| 구성 | 설명 |
|------|------|
| 위치 | 캔버스 우측 |
| 형태 | 세로 바 (너비 24px) |
| 상단 시간 | 첫 번째 이벤트 시간 |
| 하단 시간 | 마지막 이벤트 시간 |
| 스타일 | Paper 배경, 테두리, 그림자 |

---

### 10.2 드래그/스크롤 → 시간 점프

| 동작 | 구현 |
|------|------|
| 탭 | 해당 시간대 위치로 점프 |
| 드래그 | 골드 핸들 표시 + 위치 점프 |
| 점프 | `jumpToPosition()` - 해당 좌표가 화면 중앙에 위치 |

```dart
void jumpToPosition(Offset canvasPosition, Size viewportSize) {
  _canvasOffset = Offset(
    -canvasPosition.dx * _canvasScale + viewportSize.width / 2,
    -canvasPosition.dy * _canvasScale + viewportSize.height / 2,
  );
  notifyListeners();
}
```

---

### 10.3 이벤트 마커

| 이벤트 타입 | 색상 | 아이콘 |
|-------------|------|--------|
| 손글씨 | Ink (검정) | ✏️ edit |
| 텍스트 | 파랑 | 🔤 text_fields |
| 사진 | 초록 | 🖼️ image |
| 영상 | 보라 | 🎥 videocam |
| PDF | 빨강 | 📄 picture_as_pdf |

#### 마커 기능
- 호버 시 골드 테두리
- 툴팁 표시 (타입 + 날짜/시간)
- 클릭 시 해당 위치로 점프

---

## 결과

| 항목 | 상태 |
|------|------|
| 세로 네비게이션 바 | ✅ 완료 |
| 시간 표시 (상/하단) | ✅ 완료 |
| 드래그 핸들 | ✅ 완료 |
| 탭 → 점프 | ✅ 완료 |
| 이벤트 마커 | ✅ 완료 |
| 마커 색상 구분 | ✅ 완료 |
| 마커 툴팁 | ✅ 완료 |
| 중앙 점프 | ✅ 완료 |

---

## 변경된 파일

### 신규 생성

- `lib/widgets/canvas/timeline_navigator.dart` – 시간순 네비게이션 위젯

### 수정

- `lib/screens/canvas/canvas_controller.dart`
  - `jumpToPosition()` 메서드 추가
- `lib/widgets/canvas/drawing_canvas.dart`
  - `TimelineNavigator` 위젯 추가

### 문서 업데이트

- `잉크_앱프로젝트_정보/개발_순서.md` – Phase 10 체크 완료

---

## 관련 커밋

- **커밋 해시:** `566e33a`
- **커밋 메시지:** Phase 10 완료: 시간순 네비게이션

---

## 데이터 구조

### TimelineEvent
```dart
class TimelineEvent {
  final String id;
  final TimelineEventType type;
  final DateTime timestamp;
  final double x;
  final double y;
  final String? senderId;
}
```

### TimelineEventType
```dart
enum TimelineEventType {
  stroke,  // 손글씨
  text,    // 텍스트
  image,   // 사진
  video,   // 영상
  pdf,     // PDF
}
```

---

## 테스트 방법

```bash
cd /Users/ojaebaek/ink/ink_talk
flutter run
```

### 시간순 네비게이션 사용
1. 캔버스에 손글씨/텍스트/미디어 추가
2. **우측 세로 바** 확인
3. **이벤트 마커** 확인 (색상별 구분)
4. **마커 클릭** → 해당 위치로 점프
5. **바 드래그** → 시간대별 점프

---

## 기술 선택 이유

| 기술 | 선택 이유 |
|------|-----------|
| **세로 배치** | 캔버스 작업에 방해 최소화 |
| **색상 구분** | 이벤트 타입 빠른 식별 |
| **시간순 정렬** | 대화 흐름 파악 용이 |
| **중앙 점프** | 사용자 경험 향상 |

---

## 알려진 제한사항 / TODO

- [ ] 날짜가 다른 경우 날짜 구분선
- [ ] 이벤트가 많을 때 마커 그룹화
- [ ] 현재 뷰포트 위치 표시
- [ ] 스크롤 애니메이션

---

## 참고 문서

- `잉크_앱프로젝트_정보/INK_최종_기능_명세서_v1.0.md` (8장 시간순 네비게이션)
- `잉크_앱프로젝트_정보/INK_디자인_명세서_v1.0.md` (11장 시간순 네비게이션)
- `잉크_앱프로젝트_정보/개발_순서.md`

---

## 다음 단계

| Phase | 내용 |
|-------|------|
| **11** | 내보내기 (Export) |
| **12** | 모아보기 (태그함) |
| **13** | 공유/링크 |
