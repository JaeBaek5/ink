# INK 최종 기능 명세서 v1.0

---

## 0) 제품 정의

- **INK** = 손글씨(캔버스) 기반 메신저 (Handwriting-first Messenger)
- **기존 메신저와 차이**: 채팅방의 기본 화면이 텍스트 타임라인이 아니라 **"실시간 캔버스"**
- **텍스트**: 보조 기능. 스마트폰/PC 접속 시 사용성이 높도록 제공
- **우선순위**: 실시간성(1순위) → 보안성(2순위)

---

## 1) IA / 페이지 구성 (최종)

### 1.1 하단 탭 4개 (동결)

| 순서 | 탭 |
|------|-----|
| 1 | 친구 |
| 2 | 채팅 (기본 진입) |
| 3 | 모아보기(태그함) |
| 4 | 설정 |

- **"게시판" 기능 없음(완전 제거)**. "모아보기(태그함)"으로 대체.

---

## 2) 친구 (카카오톡 스타일)

### 2.1 친구 추가 (동결)

- ID로 추가
- 전화번호로 추가
- (선택) 연락처 동기화 기반 추천/추가

### 2.2 친구 판정 기준 (동결)

- **앱 내 친구 등록 여부**가 '친구'의 유일한 기준

---

## 3) 채팅/단톡 (기본은 방, 화면은 캔버스)

### 3.1 채팅 리스트

- 방 이름 / 마지막 이벤트 / 시간 / 미확인 표시
- 새 채팅(+): 1:1 / 단톡(그룹채팅) / (선택) 초대 링크

### 3.2 단톡(그룹채팅) 지원 (동결)

- 친구 다중 선택 → 그룹명/이미지 → 생성
- **역할(권한 기반 운영)**: Owner / Admin / Member / Viewer
- 세부 권한(도형 수정, 내보내기 등)은 방 설정에서 변경

---

## 4) 채팅방 화면 (핵심: 손글씨 메인)

### 4.1 기본 진입 화면 (동결)

- 채팅방 진입 시 **기본 화면은 "캔버스(화이트보드)"**
- 텍스트는 보조 패널/탭으로 제공 (스마트폰/PC에서 사용성 강화)

### 4.2 상단바 (공통)

- 방 이름/멤버수, 검색, 자료(공유 파일/미디어), 더보기(⋯)

### 4.3 캔버스 상단 중앙 – 펜 스타일 툴바 (동결)

툴바 구성은 **왼쪽→오른쪽** 순서로 아래와 같이 배치합니다.

| 순서 | 항목 | 설명 |
|------|------|------|
| 1 | **펜 1** | 사용자가 선택한 펜 종류 |
| 2 | **펜 2** | 사용자가 선택한 펜 종류 |
| 3 | **펜 3 (지우개)** | 지우개 고정 |
| 4 | **선택** | 자유형(라쏘) 또는 사각 선택 |
| 5 | **색 1** | 사용자가 팔레트에서 선택한 색 |
| 6 | **색 2** | 사용자가 팔레트에서 선택한 색 |
| 7 | **색 3** | 사용자가 팔레트에서 선택한 색 |
| 8 | **굵기 1** | 사용자가 선택한 굵기 |
| 9 | **굵기 2** | 사용자가 선택한 굵기 |
| 10 | **굵기 3** | 사용자가 선택한 굵기 |
| 11 | **뒤로가기** | Undo 아이콘 |
| 12 | **앞으로가기** | Redo 아이콘 |
| 13 | **도형** | 도형 선택 (선/화살표/사각형/원 등) |

- **펜 1, 2**: 사용자가 원하는 펜 종류를 지정  
- **펜 3**: 항상 지우개로 고정  
- **색/굵기**: 각 3슬롯, 사용자가 팔레트/슬라이더에서 미리 지정  
- **선택**: 탭 시 자유형↔사각 전환 또는 서브메뉴

### 4.4 상단 우측: 방 기능 버튼

- 내보내기 / 권한·설정 / 초대
- (선택) 링크 공유

### 4.5 좌측 패널 (패드 디스코드형)

- 방 이동(최근/고정)
- 기능 숏컷: 도형/사진/영상/문서 삽입
- 패드 가로 모드에서 고정 표시, 세로/작은 폭에서는 접힘

### 4.6 텍스트 (보조)

| 디바이스 | 정책 |
|----------|------|
| 패드 | 기본 노출 최소화 (필요 시 도구/패널로 사용) |
| 폰 | 텍스트 접근이 쉬운 UI (빠른 입력) |
| PC | 텍스트 패널 적극 사용 (검색/복붙/긴 문장) |

---

## 5) 캔버스(화이트보드) 기능 명세

### 5.1 입력 정책 (패드 UX 동결)

- **손가락** = 이동/선택/스크롤 (뷰 조작)
- **펜** = 글쓰기/그리기만

### 5.2 펜 스타일 (동결)

- **펜 슬롯 3개**: 펜 1, 펜 2 (사용자 선택), 펜 3 (지우개 고정)
- **색상 슬롯 3개**: 사용자가 팔레트에서 선택해 저장
- **굵기 슬롯 3개**: 사용자가 슬라이더/프리셋으로 선택해 저장
- 펜 종류 예: 볼펜, 연필, 형광펜 등 (확장 가능)

### 5.2.1 자동 색상 구분 (AUTO) (동결)

- 펜 스타일을 따로 지정하지 않은 기본 사용자는 **사용자별 자동 색상(User Color)**로 스트로크/텍스트가 구분됨
- 사용자가 직접 색을 선택하면 그 설정이 우선
- (권장) 툴바에 AUTO 상태 표시 + 작성자 툴팁에도 동일 색 점 표시

### 5.3 작성자 표기

- 스트로크/텍스트/첨부 오브젝트에 **작성자 아이콘 또는 닉네임** 표시

### 5.4 고스트 라이팅 (동결)

- 누군가 쓰는 중이면 **반투명(ghost)** 표시
- N초 이상 입력이 없으면 **100% 불투명**으로 확정

### 5.5 지우개 (동결)

- 펜 버튼으로 **펜↔지우개 전환**
- (권장 구현 옵션) 스트로크 단위 지우기 / 픽셀 지우기 선택 가능

### 5.6 텍스트 입력 (보조 기능, 동결 방식) – 2모드

#### 5.6.1 위치 지정형 (정밀 배치)

1. 원하는 위치 터치
2. 텍스트 입력창 활성화
3. 팝업에서 폰트 크기/색/글꼴 설정
4. 하단 입력창 입력 → 확인 버튼 → 캔버스에 배치

#### 5.6.2 빠른 텍스트 (연속 작성)

- 우측 하단 텍스트 아이콘 탭 → 위치 클릭 없이 입력 시작
- 조금 전 작성한 텍스트의 아래쪽으로 자동 배치되며 연속 작성됨

### 5.7 확대/축소

- 핀치 줌 확대/축소

### 5.8 캔버스 확장 방식 (동결)

- **사각 확장(가로+세로)** 또는 **아래쪽(세로 only)** 확장
- 설정으로 선택 가능

---

## 6) 도형/선 (미로·피그마 스타일) + 편집 시스템

### 6.1 도형/선 기능

- 선/화살표/사각형/원 (확장 가능)
- 스타일: 두께/색, 채움/투명도, 점선/실선

### 6.2 도형 편집 (필수 보강, 동결)

- 선택/이동/크기 조절(핸들)
- 레이어 정렬(앞/뒤)
- 잠금(실수 방지)

### 6.3 스냅/격자 (동결)

- 도형 모드에서만 ON

### 6.4 도형 수정 권한 (동결)

- 권한 설정으로 상황별 변경 가능  
  예: 모두 수정 / 작성자만 / Owner·Admin만 / Editor만

---

## 7) 호버(펜 근접) 사용자 식별 (동결)

- 펜이 화면 근처에 있을 때 **커서/닉네임** 표시
- **기본 표시 대상(동결)**: 앱 내 친구만
- 설정으로 범위 변경 가능 (전체 / 작성 중만 / OFF 등)

---

## 8) 대화 흐름 파악 (시간순 네비게이션)

- 화이트보드 대화 특성상 흐름 파악이 어려우므로
- 화면 안쪽에 **세로 네비게이션 바** 제공
- 드래그/스크롤 시 해당 **시간/구간 위치로 이동(점프)**

---

## 9) 멀티 윈도우 대응

- 분할/팝업 등 **멀티 윈도우** 지원
- 팝업 상태에서도 **원본 메시지/이벤트 위치로 이동** 기능 제공

---

## 10) 공유(링크)

- **링크로 페이지(캔버스) 공유**
- 앱 미설치 사용자는 **보기만 가능(읽기 전용)**

---

## 11) 업로드/첨부 (사진/영상/PDF)

### 11.1 사진 (PNG/JPG)

- 업로드 시 크기 설정 가능
- 이후 **롱프레스(꾹 누르기)**로 크기 변경
- 투명도 설정 가능

### 11.2 영상

- 크기 조절(사진과 동일)
- 재생 버튼 누르면 재생
- 하단 재생 바 표시

### 11.3 문서 (PDF)

- 크기 조절(사진과 동일)
- 중앙 양끝 **반투명 버튼**으로 페이지 넘김
- 아래 또는 우측으로 **펼쳐 보기(페이지 패널)**

---

## 12) 내보내기(Export) + 워터마크 + 통제 (동결)

### 12.1 포맷/범위

- PDF / PNG / JPG
- 부분 / 전체 내보내기

### 12.2 워터마크

- 내보낸 사용자 **ID(또는 닉네임)** 워터마크
- **앱 이름** 워터마크

### 12.3 기록/방장 설정

- 내보내기 사용자/파일 **기록**을 남겨 다른 사용자가 확인 가능(옵션)
- **방장 설정**에서 ON/OFF:
  - 내보내기 허용/차단
  - 워터마크 강제
  - 로그 공개/비공개

---

## 13) 모아보기(태그함) — 게시판 대체 (동결)

### 13.1 목적

- **내가 속한 모든 채팅방**에서 **내가 태그된** 손글씨/사진/영상을 한 화면에서 모아보기

### 13.2 화면 구성

- 검색
- **필터**: 유형(손글씨/사진/영상), 방, 기간
- **정렬**: 최신순 기본
- **카드 리스트/그리드**: 썸네일 / 방 이름 / 태그한 사람 / 시간

### 13.3 원본 점프 (핵심 동작, 동결)

- 카드 탭 → **해당 채팅방으로 이동** → **해당 이벤트로 스크롤**
- 손글씨는 **태그된 영역/시점 하이라이트 + 자동 이동**

### 13.4 태그 생성 (전제 기능)

- **손글씨**: 영역 선택(라쏘/사각) 후 @친구 태그
- **사진/영상**: 첨부 후 @친구 태그
- 태그 이벤트는 **"태그 카드"**로 기록되어 점프 가능

---

## 14) 성능/실시간/로딩 최적화 (원칙 동결)

### 14.1 실시간 이벤트 분리

- **스트로크/도형/호버**: 경량 이벤트 스트림
- **사진/영상/PDF**: 별도 채널 + 캐시

### 14.2 로딩 최적화

- **썸네일/프리뷰 우선 로딩** → 원본은 필요 시 로딩
- 설정에서 **이미지/PDF 캐시 관리**(저장공간)

### 14.3 전송 상태 표시 (권장)

- **전송 중** → **완료 체크** 표시로 상태 확인 가능

### 14.4 네트워크 불안정 처리 (권장)

- **재연결 중 배너** 표시
- **대기열** 표시로 전송 대기 중인 항목 확인 가능

---

*INK 최종 기능 명세서 v1.0 – 잉크_앱프로젝트_정보*
