# INK 개발 순서 (Development Roadmap)

기능 명세서 v1.0 및 디자인 명세서 v1.0 기준

---

## Phase 1: 기반 설정

### 1.1 프로젝트 구조 정리
- [x] 폴더 구조 설계 (screens, widgets, models, services, core, providers, router)
- [x] 상태관리 도입 (Provider)
- [x] 라우팅 설정 (go_router)

### 1.2 인증 시스템
- [x] Firebase 연동
- [x] Google 로그인
- [x] 로그아웃 처리
- [x] 사용자 세션 유지 (자동 로그인)

### 1.3 데이터베이스 설계
- [x] Firestore 컬렉션 설계
  - users (사용자 정보)
  - friends (친구 관계)
  - rooms (채팅방)
  - strokes (손글씨 스트로크)
  - messages (텍스트/첨부)
  - tags (태그 정보)
- [x] Firestore 실시간 리스너로 대체 (Realtime DB 버전 충돌)

---

## Phase 2: 기본 UI 프레임

### 2.1 반응형 레이아웃 기반
- [x] 디바이스 감지 (폰/패드/PC)
- [x] 패드: 3패널 레이아웃 (좌 네비레일/중 목록/우 상세)
- [x] 폰: 탭 기반 + 화면 전환

### 2.2 하단 탭 네비게이션 (동결)
- [x] 친구 탭
- [x] 채팅 탭 (기본 진입)
- [x] 모아보기(태그함) 탭
- [x] 설정 탭

### 2.3 테마/색상 적용
- [x] Paper 배경 (#FAF7F0)
- [x] Ink 텍스트 (#0F172A)
- [x] Gold 강조 (#B08D57)
- [x] 다크모드 지원

---

## Phase 3: 친구 기능

### 3.1 친구 목록
- [x] 친구 목록 화면 UI
- [x] Firestore에서 친구 목록 조회

### 3.2 친구 추가
- [x] ID로 친구 추가
- [x] 전화번호로 친구 추가
- [x] (선택) 연락처 동기화

### 3.3 친구 관리
- [x] 친구 삭제
- [x] 친구 차단

---

## Phase 4: 채팅 목록 (퍼즐 카드 UI)

### 4.1 채팅 목록 화면
- [x] 퍼즐 카드 UI 구현
  - 방 이름 / 마지막 활동 시간 / 미확인 배지
  - 마지막 손글씨 미리보기 (퍼즐 타일)
- [x] 탭: 채팅방 진입
- [x] 롱프레스: 컨텍스트 메뉴

### 4.2 채팅방 생성
- [x] 1:1 채팅 생성
- [x] 단톡(그룹채팅) 생성
- [ ] 초대 링크 생성 (선택)

### 4.3 채팅방 설정
- [x] 역할 관리 (Owner / Admin / Member / Viewer)
- [ ] 권한 설정 (도형 수정, 내보내기 등)

---

## Phase 5: 캔버스 (핵심 기능)

### 5.1 캔버스 기본
- [ ] 무한 캔버스 구현
- [ ] 핀치 줌 확대/축소
- [ ] 캔버스 확장 방식 (사각/세로)

### 5.2 입력 정책 (패드)
- [ ] 손가락 = 이동/선택/스크롤
- [ ] 펜 = 글쓰기/그리기만
- [ ] Apple Pencil / S Pen 감지

### 5.3 펜 스타일 툴바 (상단 중앙)
- [ ] 펜 슬롯 3개 (펜1, 펜2, 지우개)
- [ ] 선택 도구 (라쏘/사각)
- [ ] 색상 슬롯 3개
- [ ] 굵기 슬롯 3개
- [ ] Undo / Redo
- [ ] 도형 선택

### 5.4 자동 색상 구분 (AUTO)
- [ ] 사용자별 자동 색상 할당
- [ ] 수동 선택 시 우선 적용
- [ ] 툴바 AUTO 상태 표시

### 5.5 지우개
- [ ] 펜↔지우개 전환
- [ ] 스트로크 단위 지우기
- [ ] (선택) 픽셀 지우기

---

## Phase 6: 실시간 동기화 (핵심)

### 6.1 스트로크 실시간 전송
- [ ] Firebase Realtime DB 연동
- [ ] 좌표 데이터 JSON 스트리밍
- [ ] Douglas-Peucker 알고리즘 (데이터 압축)

### 6.2 고스트 라이팅
- [ ] 작성 중 반투명(ghost) 표시
- [ ] N초 후 100% 확정

### 6.3 작성자 표시
- [ ] 스트로크/오브젝트에 작성자 정보 저장
- [ ] 패드: 펜 호버 시 툴팁
- [ ] 폰: 짧게 터치 시 툴팁

### 6.4 호버 사용자 식별
- [ ] 펜 근접 시 커서/닉네임 표시
- [ ] 친구만 / 전체 / OFF 설정

---

## Phase 7: 텍스트 입력

### 7.1 위치 지정형 (정밀 배치)
- [ ] 터치 → 입력창 → 배치

### 7.2 빠른 텍스트 (연속 작성)
- [ ] 우측 하단 아이콘 → 자동 배치

---

## Phase 8: 도형/선

### 8.1 도형 종류
- [ ] 선 / 화살표 / 사각형 / 원

### 8.2 도형 스타일
- [ ] 두께/색, 채움/투명도, 점선/실선

### 8.3 도형 편집
- [ ] 선택/이동/크기 조절
- [ ] 레이어 (앞/뒤)
- [ ] 잠금
- [ ] 스냅/격자 (도형 모드 only)

### 8.4 도형 수정 권한
- [ ] 모두 / 작성자만 / Owner·Admin만

---

## Phase 9: 업로드/첨부

### 9.1 사진 (PNG/JPG)
- [ ] 업로드 + 크기 설정
- [ ] 롱프레스 옵션 메뉴
- [ ] 투명도 설정

### 9.2 영상
- [ ] 크기 조절
- [ ] 재생 버튼 / 재생 바

### 9.3 문서 (PDF)
- [ ] 크기 조절
- [ ] 페이지 넘김 버튼
- [ ] 펼쳐보기 패널

### 9.4 오브젝트 롱프레스
- [ ] 배경 Dim 처리
- [ ] 팝업 메뉴

---

## Phase 10: 시간순 네비게이션

- [ ] 세로 네비게이션 바
- [ ] 드래그/스크롤 → 시간/구간 점프
- [ ] 이벤트 마커 (손글씨/사진/영상/PDF)

---

## Phase 11: 모아보기 (태그함)

### 11.1 태그 생성
- [ ] 손글씨: 영역 선택 후 @친구 태그
- [ ] 사진/영상: 첨부 후 @친구 태그

### 11.2 모아보기 화면
- [ ] 검색
- [ ] 필터 (유형/방/기간)
- [ ] 정렬 (최신순)
- [ ] 카드 리스트/그리드

### 11.3 원본 점프
- [ ] 카드 탭 → 해당 채팅방 → 해당 이벤트로 스크롤
- [ ] 태그 영역 하이라이트

---

## Phase 12: 공유/내보내기

### 12.1 링크 공유
- [ ] 링크 생성
- [ ] 앱 미설치 → 읽기 전용 웹뷰

### 12.2 내보내기
- [ ] 포맷: PDF / PNG / JPG
- [ ] 범위: 부분 / 전체
- [ ] 워터마크 (사용자 ID + 앱 이름)

### 12.3 방장 설정
- [ ] 내보내기 허용/차단
- [ ] 워터마크 강제
- [ ] 로그 공개/비공개

---

## Phase 13: 설정

- [ ] 프로필 편집
- [ ] 알림 설정
- [ ] 캔버스 확장 방식 설정
- [ ] 캐시 관리
- [ ] 계정 관리 (로그아웃/탈퇴)

---

## Phase 14: 성능 최적화

### 14.1 실시간 최적화
- [ ] 스트로크/도형/호버: 경량 이벤트 스트림
- [ ] 사진/영상/PDF: 별도 채널 + 캐시

### 14.2 로딩 최적화
- [ ] 썸네일/프리뷰 우선 로딩
- [ ] 원본 지연 로딩

### 14.3 전송 상태 표시
- [ ] 전송 중 → 완료 체크

### 14.4 네트워크 불안정 처리
- [ ] 재연결 중 배너
- [ ] 대기열 표시

---

## Phase 15: 멀티 윈도우 / 플랫폼 확장

- [ ] 분할/팝업 멀티 윈도우 지원
- [ ] iOS 빌드 테스트
- [ ] Web 빌드 테스트
- [ ] (선택) PC 앱 빌드

---

## Phase 16: QA / 출시 준비

- [ ] 전체 기능 테스트
- [ ] 성능 프로파일링
- [ ] 버그 수정
- [ ] 스토어 등록 준비 (스크린샷, 설명)
- [ ] 베타 테스트
- [ ] 정식 출시

---

*INK 개발 순서 – 잉크_앱프로젝트_정보*
